# Muscle App – チームで高め合うトレーニング管理アプリ

## 📖 概要
「記録するだけ」のアプリから、「チームで成長を実感できる」アプリへ。
ラクロス部でトレーニングリーダーを務めた経験から生まれた、モチベーション特化型の体型・筋トレ管理アプリケーションです。

## 🚀 開発の背景（Why）
大学の部活動でトレーニングリーダーを務める中で、**「筋トレが続かない」「メンバーのモチベーションにバラつきがある」**という課題に直面しました。
既存のアプリは「個人の記録」には特化していても、チーム全体で熱量を共有したり、互いの成長を可視化して競い合ったりする仕組みが不足していると感じました。

そこで、単なる数値管理ではなく、**「仲間や自分自身の成長がゲーム感覚で分かり、自然と継続できる仕組み」**を目指して開発しました。

## ✨ 主な機能

### 1. 成長の可視化とゲーミフィケーション
- **達成度レベル計算**: 身長・体重・体脂肪率から、目標スタイル（悟空タイプ/アスリートタイプ等）に対する達成度（0〜100）を算出。
- **1RM（最大挙動重量）の推移**: 日々の記録からEpley式を用いて1RMを推定し、成長をグラフ化。「過去の自分」との比較を容易に。

### 2. チーム・ソーシャル機能（New!）
- **招待コード制チーム作成**: セキュリティと手軽さを両立した「招待コード」により、部活や友人と限定的なチームを作成。
- **フレンド機能**: 相互フォローした友人のワークアウト記録を閲覧可能（アクセス制御付き）。
- **ランキング・比較**: チーム内で誰がどれだけ努力しているかを可視化し、競争意識を刺激。

### 3. ワークアウト記録
- 種目、重量、回数（Reps）、セット数を詳細に記録。
- カレンダー形式やリスト形式での履歴確認。

## 🛠 使用技術

**Backend**
- **Python 3.10+**
- **FastAPI**: 高速な非同期処理と自動ドキュメント生成のために採用。
- **SQLAlchemy (ORM)**: データベース操作の抽象化。
- **Pydantic**: 厳密な型定義により、フロントエンドとのデータ不整合を防止。
- **SQLite**: 開発速度とポータビリティを重視（将来的にPostgreSQLへ移行想定）。
- **JWT (JSON Web Tokens)**: ステートレスで安全なユーザー認証の実装。

**Frontend**
- HTML5 / CSS3 / JavaScript (Vanilla)
- Chart.js: 成長推移の視覚化。

## 📂 ディレクトリ構成（設計のこだわり）
保守性と拡張性を高めるため、FastAPIのベストプラクティスに基づき責務を分離しました。

```text
muscle-app/
├ backend/
│  ├ main.py        # エントリポイント（ルーティング統合）
│  ├ auth.py        # JWT認証・ログインロジック
│  ├ db.py          # DB接続セッション管理
│  ├ models.py      # SQLAlchemyモデル（DB設計）
│  ├ schemas.py     # Pydanticスキーマ（API入出力定義）
│  └ presets.py     # 目標体型の定義データ
└ frontend/
   ├ index.html     # トップ・ダッシュボード
   ├ input.html     # 記録入力画面
   └ static/        # 静的アセット
🔧 開発における工夫と学び
1. フロントエンド・バックエンド・DBの整合性確保
開発当初、画面上は動作していてもAPIの型が合わない、DBに必要なカラムがないといった「状態の不整合」による422エラーが頻発しました。 これを解決するため、models.py（DB定義）とschemas.py（API定義）を明確に分離し、Pydanticを用いて厳密なバリデーションを行う設計へ変更しました。結果として、デバッグ時間の短縮とデータの信頼性向上を実現しました。
2. 現場視点のUXとセキュリティの両立
「チームへの招待」において、メールアドレス入力の手間を省きつつ不正参加を防ぐため、ローテーション可能な招待コード方式（invite_code）を採用しました。 また、APIレベルで Depends(get_current_user) を徹底し、URLを直叩きされても部外者がチームデータや友人の記録を見られないよう、厳格なアクセス制御（Authorization）を実装しています。
💻 起動方法
# 1. 依存ライブラリのインストール
pip install -r requirements.txt

# 2. サーバー起動
cd backend
uvicorn main:app --reload
ブラウザで http://127.0.0.1:8000/ にアクセスしてください。 APIドキュメントは http://127.0.0.1:8000/docs で確認できます。
🚀 今後のロードマップ
• [ ] トレーニングメニューの自動提案（LLM連携）
• [ ] スマホネイティブ化（モバイルファーストUIの強化）
• [ ] InBody等の体組成レポート画像解析機能

---

### README作成の意図（採用面接対策として）

1.  **「Why」の強化**: 冒頭に「ラクロス部での経験」を明記しました。これにより、面接で話すエピソードとGitHub上のドキュメントが一貫し、説得力が増します。
2.  **技術選定の理由付け**: ディレクトリ構成のセクションで、単にファイルを羅列するのではなく「責務を分離した（`schemas.py`と`models.py`）」と書くことで、面接で話す「422エラーの解決策」の証拠としました。
3.  **機能の説明**: 最新コードにある「招待コード」「1RM計算」を機能一覧に追加し、技術的に高度なことに挑戦していることを示しました。

## 現在の課題・未実装部分

本アプリは現在も開発途中であり、以下の点については今後の改善対象としています。

- チーム招待フローのUI/UX改善（現状は最低限の実装）
- フレンド機能における通知・履歴管理の未実装
- ワークアウト分析機能（部位別・期間別集計）の拡張
- エラーハンドリングおよび例外設計の統一
- テストコード（pytest）による自動テストの導入

